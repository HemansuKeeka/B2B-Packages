# Setup Instructions

## 1. Supabase Setup
1. Create a project at [supabase.com](https://supabase.com).
2. Run `supabase_schema.sql` in the **SQL Editor**.
3. **CRITICAL**: In **Authentication > Providers > Email**, turn OFF "Confirm email".

## 2. Stripe Integration (Payment Links)
This app uses **Stripe Payment Links** for a no-code checkout experience.

1. **Create Products**: In Stripe Dashboard, create products for your packages.
2. **Generate Payment Links**:
   - For each product, click "Create Payment Link".
   - **Important**: In the "After payment" section, select "Don't show confirmation page" and redirect the user back to your app: `https://your-app-url.com/#/success`.
3. **Update Database**: 
   - Go to your Supabase **Table Editor** for `packages`.
   - Update the `stripe_payment_link` column with the full URLs generated by Stripe (e.g., `https://buy.stripe.com/abc...`).
   - The app will automatically append `client_reference_id` to these links to help you track users.

## 3. Automating Fulfilment (Webhook)
To automatically mark packages as "completed" in the user's dashboard after they pay:

1. Create a Supabase Edge Function: `npx supabase functions new stripe-webhook`.
2. Configure it to listen for the `checkout.session.completed` event from Stripe.
3. In the webhook logic, use the `client_reference_id` (which is the User ID) to find and update the correct record in your `purchases` table.
4. Deploy the function and add the URL to your Stripe Dashboard under **Developers > Webhooks**.
